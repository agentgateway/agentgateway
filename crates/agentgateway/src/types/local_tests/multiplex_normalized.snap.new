---
source: crates/agentgateway/src/types/local_tests.rs
assertion_line: 51
description: "Config normalization test for multiplex: YAML -> LocalConfig -> NormalizedLocalConfig -> YAML"
---
binds:
- key: bind/3000
  address: '[::]:3000'
  protocol: http
  tunnelProtocol: direct
  listeners:
    ns/name/bind/3000/listener0:
      key: ns/name/bind/3000/listener0
      gatewayName: name
      gatewayNamespace: ns
      listenerName: listener0
      hostname: ''
      protocol: HTTP
      routes:
        ns/name/bind/3000/listener0/default/route0:
          key: ns/name/bind/3000/listener0/default/route0
          name: route0
          namespace: default
          matches:
          - path:
              pathPrefix: /
          backends:
          - weight: 1
            backend: /ns/name/bind/3000/listener0/default/route0/backend0
      tcpRoutes: {}
policies: []
backends:
- backend:
    mcp:
      name: ns/name/bind/3000/listener0/default/route0/backend0
      namespace: ''
      target:
        targets:
        - name: time
          stdio:
            cmd: uvx
            args:
            - mcp-server-time
        - name: everything
          stdio:
            cmd: npx
            args:
            - '@modelcontextprotocol/server-everything'
        stateful: true
        alwaysUsePrefix: false
workloads: []
services: []
