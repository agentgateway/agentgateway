{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "LocalConfig",
  "type": "object",
  "properties": {
    "binds": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "listeners": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "gatewayName": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "hostname": {
                  "description": "Can be a wildcard",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "name": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "protocol": {
                  "type": "string",
                  "enum": [
                    "HTTP",
                    "HTTPS",
                    "TLS",
                    "TCP",
                    "HBONE"
                  ]
                },
                "routes": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "items": {
                    "type": "object",
                    "properties": {
                      "backends": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "weight": {
                              "type": "integer",
                              "format": "uint",
                              "default": 1,
                              "minimum": 0
                            }
                          },
                          "oneOf": [
                            {
                              "type": "string",
                              "enum": [
                                "invalid"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "service": {
                                  "type": "object",
                                  "properties": {
                                    "name": {
                                      "type": "object",
                                      "properties": {
                                        "hostname": {
                                          "type": "string"
                                        },
                                        "namespace": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "namespace",
                                        "hostname"
                                      ]
                                    },
                                    "port": {
                                      "type": "integer",
                                      "format": "uint16",
                                      "maximum": 65535,
                                      "minimum": 0
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "name",
                                    "port"
                                  ]
                                }
                              },
                              "required": [
                                "service"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "host": {
                                  "oneOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "Address": {
                                          "type": "string"
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "Address"
                                      ]
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "Hostname": {
                                          "type": "array",
                                          "maxItems": 2,
                                          "minItems": 2,
                                          "prefixItems": [
                                            {
                                              "type": "string"
                                            },
                                            {
                                              "type": "integer",
                                              "format": "uint16",
                                              "maximum": 65535,
                                              "minimum": 0
                                            }
                                          ]
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "Hostname"
                                      ]
                                    }
                                  ]
                                }
                              },
                              "required": [
                                "host"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "dynamic": {
                                  "type": "object",
                                  "additionalProperties": false
                                }
                              },
                              "required": [
                                "dynamic"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "mcp": {
                                  "type": "object",
                                  "properties": {
                                    "targets": {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          }
                                        },
                                        "oneOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "sse": {
                                                "type": "object",
                                                "properties": {
                                                  "host": {
                                                    "type": "string"
                                                  },
                                                  "path": {
                                                    "type": "string"
                                                  },
                                                  "port": {
                                                    "type": "integer",
                                                    "format": "uint16",
                                                    "maximum": 65535,
                                                    "minimum": 0
                                                  }
                                                },
                                                "required": [
                                                  "host",
                                                  "port",
                                                  "path"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "sse"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "mcp": {
                                                "type": "object",
                                                "properties": {
                                                  "host": {
                                                    "type": "string"
                                                  },
                                                  "path": {
                                                    "type": "string"
                                                  },
                                                  "port": {
                                                    "type": "integer",
                                                    "format": "uint16",
                                                    "maximum": 65535,
                                                    "minimum": 0
                                                  }
                                                },
                                                "required": [
                                                  "host",
                                                  "port",
                                                  "path"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "mcp"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "stdio": {
                                                "type": "object",
                                                "properties": {
                                                  "args": {
                                                    "type": "array",
                                                    "items": {
                                                      "type": "string"
                                                    }
                                                  },
                                                  "cmd": {
                                                    "type": "string"
                                                  },
                                                  "env": {
                                                    "type": "object",
                                                    "additionalProperties": {
                                                      "type": "string"
                                                    }
                                                  }
                                                },
                                                "required": [
                                                  "cmd"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "stdio"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "openapi": {
                                                "type": "object",
                                                "properties": {
                                                  "host": {
                                                    "type": "string"
                                                  },
                                                  "port": {
                                                    "type": "integer",
                                                    "format": "uint16",
                                                    "maximum": 65535,
                                                    "minimum": 0
                                                  },
                                                  "schema": true
                                                },
                                                "required": [
                                                  "host",
                                                  "port",
                                                  "schema"
                                                ]
                                              }
                                            },
                                            "required": [
                                              "openapi"
                                            ]
                                          }
                                        ],
                                        "required": [
                                          "name"
                                        ]
                                      }
                                    }
                                  },
                                  "required": [
                                    "targets"
                                  ]
                                }
                              },
                              "required": [
                                "mcp"
                              ]
                            },
                            {
                              "type": "object",
                              "properties": {
                                "ai": {
                                  "type": "object",
                                  "properties": {
                                    "hostOverride": {
                                      "anyOf": [
                                        {
                                          "oneOf": [
                                            {
                                              "type": "object",
                                              "properties": {
                                                "Address": {
                                                  "type": "string"
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "Address"
                                              ]
                                            },
                                            {
                                              "type": "object",
                                              "properties": {
                                                "Hostname": {
                                                  "type": "array",
                                                  "maxItems": 2,
                                                  "minItems": 2,
                                                  "prefixItems": [
                                                    {
                                                      "type": "string"
                                                    },
                                                    {
                                                      "type": "integer",
                                                      "format": "uint16",
                                                      "maximum": 65535,
                                                      "minimum": 0
                                                    }
                                                  ]
                                                }
                                              },
                                              "additionalProperties": false,
                                              "required": [
                                                "Hostname"
                                              ]
                                            }
                                          ]
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    },
                                    "provider": {
                                      "oneOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "openAI": {
                                              "type": "object",
                                              "properties": {
                                                "model": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                }
                                              }
                                            }
                                          },
                                          "additionalProperties": false,
                                          "required": [
                                            "openAI"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "gemini": {
                                              "type": "object",
                                              "properties": {
                                                "model": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                }
                                              }
                                            }
                                          },
                                          "additionalProperties": false,
                                          "required": [
                                            "gemini"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "vertex": {
                                              "type": "object",
                                              "properties": {
                                                "model": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                },
                                                "projectId": {
                                                  "type": "string"
                                                },
                                                "region": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                }
                                              },
                                              "required": [
                                                "projectId"
                                              ]
                                            }
                                          },
                                          "additionalProperties": false,
                                          "required": [
                                            "vertex"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "anthropic": {
                                              "type": "object",
                                              "properties": {
                                                "model": {
                                                  "type": [
                                                    "string",
                                                    "null"
                                                  ]
                                                }
                                              }
                                            }
                                          },
                                          "additionalProperties": false,
                                          "required": [
                                            "anthropic"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "bedrock": {
                                              "type": "object",
                                              "properties": {
                                                "model": {
                                                  "type": "string"
                                                },
                                                "region": {
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "model",
                                                "region"
                                              ]
                                            }
                                          },
                                          "additionalProperties": false,
                                          "required": [
                                            "bedrock"
                                          ]
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "provider"
                                  ]
                                }
                              },
                              "required": [
                                "ai"
                              ]
                            }
                          ],
                          "unevaluatedProperties": false
                        }
                      },
                      "hostnames": {
                        "description": "Can be a wildcard",
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "matches": {
                        "type": "array",
                        "default": [
                          {
                            "path": {
                              "pathPrefix": "/"
                            }
                          }
                        ],
                        "items": {
                          "type": "object",
                          "properties": {
                            "headers": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "value": {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "exact": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "exact"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "regex": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "regex"
                                        ]
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "name",
                                  "value"
                                ]
                              }
                            },
                            "method": {
                              "type": "string"
                            },
                            "path": {
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "exact": {
                                      "type": "string"
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "exact"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "pathPrefix": {
                                      "type": "string"
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "pathPrefix"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "regex": {
                                      "type": "array",
                                      "maxItems": 2,
                                      "minItems": 2,
                                      "prefixItems": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "integer",
                                          "format": "uint",
                                          "minimum": 0
                                        }
                                      ]
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "regex"
                                  ]
                                }
                              ]
                            },
                            "query": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "value": {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "exact": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "exact"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "regex": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "regex"
                                        ]
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "name",
                                  "value"
                                ]
                              }
                            }
                          },
                          "required": [
                            "path"
                          ]
                        }
                      },
                      "name": {
                        "type": [
                          "string",
                          "null"
                        ]
                      },
                      "policies": {
                        "type": [
                          "object",
                          "null"
                        ],
                        "properties": {
                          "a2a": {
                            "description": "Mark this traffic as A2A to enable A2A processing and telemetry.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "default": null
                          },
                          "ai": {
                            "description": "Mark this as LLM traffic to enable LLM processing.",
                            "default": null
                          },
                          "backendAuth": {
                            "description": "Authenticate to the backend.",
                            "anyOf": [
                              {
                                "oneOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "passthrough": {
                                        "type": "object"
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "passthrough"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "key": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "file": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "file"
                                            ]
                                          },
                                          {
                                            "type": "string"
                                          }
                                        ]
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "key"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "gcp": {
                                        "type": "object"
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "gcp"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "aws": {
                                        "type": "object"
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "aws"
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "default": null
                          },
                          "backendTLS": {
                            "description": "Send TLS to the backend.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "cert": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "insecure": {
                                "type": "boolean",
                                "default": false
                              },
                              "insecureHost": {
                                "type": "boolean",
                                "default": false
                              },
                              "key": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "root": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "cors": {
                            "description": "Handle CORS preflight requests and append configured CORS headers to applicable requests.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "allowCredentials": {
                                "type": "boolean",
                                "default": false
                              },
                              "allowHeaders": {
                                "type": "array",
                                "default": [],
                                "items": {
                                  "type": "string"
                                }
                              },
                              "allowMethods": {
                                "type": "array",
                                "default": [],
                                "items": {
                                  "type": "string"
                                }
                              },
                              "allowOrigins": {
                                "type": "array",
                                "default": [],
                                "items": {
                                  "type": "string"
                                }
                              },
                              "exposeHeaders": {
                                "type": "array",
                                "default": [],
                                "items": {
                                  "type": "string"
                                }
                              },
                              "maxAge": {
                                "type": [
                                  "string",
                                  "null"
                                ],
                                "default": null
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "directResponse": {
                            "description": "Directly respond to the request with a static response.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "body": {
                                "type": [
                                  "array",
                                  "string"
                                ],
                                "items": {
                                  "type": "integer",
                                  "format": "uint8",
                                  "maximum": 255,
                                  "minimum": 0
                                }
                              },
                              "status": {
                                "type": "integer",
                                "format": "uint16",
                                "maximum": 65535,
                                "minimum": 1
                              }
                            },
                            "additionalProperties": false,
                            "default": null,
                            "required": [
                              "body",
                              "status"
                            ]
                          },
                          "extAuthz": {
                            "description": "Authenticate incoming requests by calling an external authorization server.",
                            "default": null
                          },
                          "jwtAuth": {
                            "description": "Authenticate incoming JWT requests.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "audiences": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              },
                              "issuer": {
                                "type": "string"
                              },
                              "jwks": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "file": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "file"
                                    ]
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "url": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "url"
                                    ]
                                  }
                                ]
                              }
                            },
                            "additionalProperties": false,
                            "required": [
                              "issuer",
                              "audiences",
                              "jwks"
                            ]
                          },
                          "localRateLimit": {
                            "description": "Rate limit incoming requests. State is kept local.",
                            "default": []
                          },
                          "mcpAuthentication": {
                            "description": "Authentication for MCP clients.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "audience": {
                                "type": "string"
                              },
                              "issuer": {
                                "type": "string"
                              },
                              "provider": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "auth0": {
                                            "type": "object"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "auth0"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "keycloak": {
                                            "type": "object"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "keycloak"
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "scopes": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              }
                            },
                            "default": null,
                            "required": [
                              "issuer",
                              "scopes",
                              "audience"
                            ]
                          },
                          "mcpAuthorization": {
                            "description": "Authorization policies for MCP access.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "rules": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              }
                            },
                            "default": null,
                            "required": [
                              "rules"
                            ]
                          },
                          "remoteRateLimit": {
                            "description": "Rate limit incoming requests. State is managed by a remote server.",
                            "default": null
                          },
                          "requestHeaderModifier": {
                            "description": "Headers to be modified in the request.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "add": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              },
                              "remove": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              },
                              "set": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "requestMirror": {
                            "description": "Mirror incoming requests to another destination.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "backend": {
                                "oneOf": [
                                  {
                                    "type": "string",
                                    "enum": [
                                      "invalid"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "service": {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "object",
                                            "properties": {
                                              "hostname": {
                                                "type": "string"
                                              },
                                              "namespace": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "namespace",
                                              "hostname"
                                            ]
                                          },
                                          "port": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "maximum": 65535,
                                            "minimum": 0
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "name",
                                          "port"
                                        ]
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "service"
                                    ]
                                  },
                                  {
                                    "type": "object",
                                    "properties": {
                                      "host": {
                                        "oneOf": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "Address": {
                                                "type": "string"
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "Address"
                                            ]
                                          },
                                          {
                                            "type": "object",
                                            "properties": {
                                              "Hostname": {
                                                "type": "array",
                                                "maxItems": 2,
                                                "minItems": 2,
                                                "prefixItems": [
                                                  {
                                                    "type": "string"
                                                  },
                                                  {
                                                    "type": "integer",
                                                    "format": "uint16",
                                                    "maximum": 65535,
                                                    "minimum": 0
                                                  }
                                                ]
                                              }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                              "Hostname"
                                            ]
                                          }
                                        ]
                                      }
                                    },
                                    "additionalProperties": false,
                                    "required": [
                                      "host"
                                    ]
                                  }
                                ]
                              },
                              "percentage": {
                                "type": "number",
                                "format": "double"
                              }
                            },
                            "additionalProperties": false,
                            "default": null,
                            "required": [
                              "backend",
                              "percentage"
                            ]
                          },
                          "requestRedirect": {
                            "description": "Directly respond to the request with a redirect.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "authority": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "full": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "full"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "host": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "host"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "port": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "maximum": 65535,
                                            "minimum": 1
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "port"
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "path": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "full": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "full"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "prefix": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "prefix"
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "scheme": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "status": {
                                "type": [
                                  "integer",
                                  "null"
                                ],
                                "format": "uint16",
                                "maximum": 65535,
                                "minimum": 1
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "responseHeaderModifier": {
                            "description": "Headers to be modified in the response.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "add": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              },
                              "remove": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              },
                              "set": {
                                "type": "object",
                                "additionalProperties": {
                                  "type": "string"
                                }
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "retry": {
                            "description": "Retry matching requests.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "attempts": {
                                "type": "integer",
                                "format": "uint8",
                                "default": 1,
                                "maximum": 255,
                                "minimum": 1
                              },
                              "backoff": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "codes": {
                                "type": "array",
                                "items": {
                                  "type": "integer",
                                  "format": "uint8",
                                  "maximum": 255,
                                  "minimum": 1
                                }
                              }
                            },
                            "additionalProperties": false,
                            "default": null,
                            "required": [
                              "codes"
                            ]
                          },
                          "timeout": {
                            "description": "Timeout requests that exceed the configured duration.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "backendRequestTimeout": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "requestTimeout": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "transformations": {
                            "description": "Modify requests and responses",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "request": {
                                "type": [
                                  "object",
                                  "null"
                                ],
                                "properties": {
                                  "add": {
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "default": {}
                                  },
                                  "body": {
                                    "type": [
                                      "string",
                                      "null"
                                    ],
                                    "default": null
                                  },
                                  "remove": {
                                    "type": "array",
                                    "default": [],
                                    "items": {
                                      "type": "string"
                                    }
                                  },
                                  "set": {
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "default": {}
                                  }
                                },
                                "additionalProperties": false
                              },
                              "response": {
                                "type": [
                                  "object",
                                  "null"
                                ],
                                "properties": {
                                  "add": {
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "default": {}
                                  },
                                  "body": {
                                    "type": [
                                      "string",
                                      "null"
                                    ],
                                    "default": null
                                  },
                                  "remove": {
                                    "type": "array",
                                    "default": [],
                                    "items": {
                                      "type": "string"
                                    }
                                  },
                                  "set": {
                                    "type": "object",
                                    "additionalProperties": {
                                      "type": "string"
                                    },
                                    "default": {}
                                  }
                                },
                                "additionalProperties": false
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          },
                          "urlRewrite": {
                            "description": "Modify the URL path or authority.",
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "authority": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "full": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "full"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "host": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "host"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "port": {
                                            "type": "integer",
                                            "format": "uint16",
                                            "maximum": 65535,
                                            "minimum": 1
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "port"
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "path": {
                                "anyOf": [
                                  {
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "full": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "full"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "prefix": {
                                            "type": "string"
                                          }
                                        },
                                        "additionalProperties": false,
                                        "required": [
                                          "prefix"
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "additionalProperties": false,
                            "default": null
                          }
                        },
                        "additionalProperties": false
                      },
                      "ruleName": {
                        "type": [
                          "string",
                          "null"
                        ]
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "tcpRoutes": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "items": {
                    "type": "object",
                    "properties": {
                      "backends": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "backend": {
                              "oneOf": [
                                {
                                  "type": "string",
                                  "enum": [
                                    "invalid"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "service": {
                                      "type": "object",
                                      "properties": {
                                        "name": {
                                          "type": "object",
                                          "properties": {
                                            "hostname": {
                                              "type": "string"
                                            },
                                            "namespace": {
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "namespace",
                                            "hostname"
                                          ]
                                        },
                                        "port": {
                                          "type": "integer",
                                          "format": "uint16",
                                          "maximum": 65535,
                                          "minimum": 0
                                        }
                                      },
                                      "additionalProperties": false,
                                      "required": [
                                        "name",
                                        "port"
                                      ]
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "service"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "host": {
                                      "oneOf": [
                                        {
                                          "type": "object",
                                          "properties": {
                                            "Address": {
                                              "type": "string"
                                            }
                                          },
                                          "additionalProperties": false,
                                          "required": [
                                            "Address"
                                          ]
                                        },
                                        {
                                          "type": "object",
                                          "properties": {
                                            "Hostname": {
                                              "type": "array",
                                              "maxItems": 2,
                                              "minItems": 2,
                                              "prefixItems": [
                                                {
                                                  "type": "string"
                                                },
                                                {
                                                  "type": "integer",
                                                  "format": "uint16",
                                                  "maximum": 65535,
                                                  "minimum": 0
                                                }
                                              ]
                                            }
                                          },
                                          "additionalProperties": false,
                                          "required": [
                                            "Hostname"
                                          ]
                                        }
                                      ]
                                    }
                                  },
                                  "additionalProperties": false,
                                  "required": [
                                    "host"
                                  ]
                                }
                              ]
                            },
                            "weight": {
                              "type": "integer",
                              "format": "uint",
                              "default": 1,
                              "minimum": 0
                            }
                          },
                          "additionalProperties": false,
                          "required": [
                            "backend"
                          ]
                        }
                      },
                      "hostnames": {
                        "description": "Can be a wildcard",
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "name": {
                        "type": [
                          "string",
                          "null"
                        ]
                      },
                      "policies": {
                        "type": [
                          "object",
                          "null"
                        ],
                        "properties": {
                          "backendTls": {
                            "type": [
                              "object",
                              "null"
                            ],
                            "properties": {
                              "cert": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "insecure": {
                                "type": "boolean",
                                "default": false
                              },
                              "insecureHost": {
                                "type": "boolean",
                                "default": false
                              },
                              "key": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              },
                              "root": {
                                "type": [
                                  "string",
                                  "null"
                                ]
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "additionalProperties": false
                      },
                      "ruleName": {
                        "type": [
                          "string",
                          "null"
                        ]
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "tls": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "properties": {
                    "cert": {
                      "type": "string"
                    },
                    "key": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false,
                  "required": [
                    "cert",
                    "key"
                  ]
                }
              },
              "additionalProperties": false
            }
          },
          "port": {
            "type": "integer",
            "format": "uint16",
            "maximum": 65535,
            "minimum": 0
          }
        },
        "additionalProperties": false,
        "required": [
          "port",
          "listeners"
        ]
      }
    },
    "config": {
      "default": null
    },
    "services": {
      "default": []
    },
    "workloads": {
      "default": []
    }
  },
  "additionalProperties": false
}
