---
source: crates/agentgateway/src/types/local.rs
description: "Config normalization test for authorization: YAML -> LocalConfig -> NormalizedLocalConfig -> YAML"
---
binds:
- key: bind/3000
  address: '[::]:3000'
  listeners:
    listener0/bind/3000:
      key: listener0/bind/3000
      name: listener0
      gatewayName: bind/3000
      hostname: ''
      protocol: HTTP
      routes:
        listener0/bind/3000/route0/default:
          key: listener0/bind/3000/route0/default
          routeName: route0
          matches:
          - path:
              pathPrefix: /
          filters:
          - cors:
              allowCredentials: false
              allowHeaders:
              - '*'
              allowOrigins:
              - '*'
              maxAge: null
          backends:
          - weight: 1
            backend: listener0/bind/3000/route0/default
          policies:
            timeout: {}
            retry: null
      tcpRoutes: {}
policies:
- name: listener0/bind/3000/route0/default/backend-1
  target:
    backend: listener0/bind/3000/route0/default
  policy:
    mcpAuthorization:
      rules:
      - mcp.tool.name == "echo"
      - jwt.sub == "test-user" && mcp.tool.name == "add"
      - mcp.tool.name == "printEnv" && jwt.nested.key == "value"
backends:
- mcp:
    name: listener0/bind/3000/route0/default
    target:
      targets:
      - name: everything
        stdio:
          cmd: npx
          args:
          - '@modelcontextprotocol/server-everything'
workloads: []
services: []
